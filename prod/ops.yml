- type: replace
  path: /instance_groups/name=web/jobs/-
  value:
    name: telegraf-agent
    release: telegraf-agent
    properties:
      influxdb:
        url: http://10.2.0.2:8086
        database: wings
        username: concourse
        password: concourse
      inputs:
        procstat:
          exe: concourse

- type: replace
  path: /instance_groups/name=worker/jobs/-
  value:
    name: telegraf-agent
    release: telegraf-agent
    properties:
      influxdb:
        url: http://10.2.0.2:8086
        database: wings
        username: concourse
        password: concourse
      inputs:
        procstat:
          exe: concourse

- type: replace
  path: /instance_groups/name=db/jobs/name=postgres/properties/databases/max_connections?
  value: 220


- type: replace
  path: /instance_groups/name=db/jobs/name=postgres/properties/databases/additional_config?
  value:
    shared_buffers: 2GB
    effective_cache_size: 7GB
    checkpoint_completion_target: 0.9
    default_statistics_target: 1000
    work_mem: 8MB
    maintenance_work_mem: 128MB
    random_page_cost: 3.0
